<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, minimum-scale=0.2,maximum-scale=2.0,user-scalable=yes, initial-scale=1.5">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>D3.js Subway Map</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        body{
            overflow: hidden;
        }
        #vision{
            width: 2750px;
            height: 1900px;
        }
    </style>
    <script src="./dragscroll.js"></script>
    <script src="https://d3js.org/d3.v3.js"></script>
</head>
<body class="dragscroll">
    <svg id="vision"  viewBox="0 0 2750 1900"
     xmlns="http://www.w3.org/2000/svg" version="1.1">
    </svg>
<script>
    window.onload = function(){
        window.scrollTo(875,625);
    };
    window.onbeforeprint = function(){
        window.scrollTo(875,625);
    };
    const vision = d3.select('#vision');

    const line1 =   [ 
                        [ 600, 880, '苹果园', 35, 0 ],
                        [ 620, 930, '古城', 0, 25 ],
                        [ 670, 930, '八角游乐园', 0, -15 ],
                        [ 720, 930, '八宝山', 0, 25 ],
                        [ 775, 930, '玉泉路', 0, 25 ],
                        [ 830, 930, '五棵松', 0, 25 ],
                        [ 890, 930, '万寿路', 0, 25 ],
                        [ 955, 930, '公主坟', 33, 25 ],
                        [ 1020, 930, '军事博物馆', 45, -15 ],
                        [ 1095, 930, '木樨地', 0, 25 ],
                        [ 1165, 930, '南礼士路', 0, 25 ],
                        [ 1215, 930, '', 0, 25 ],
                        [ 1300, 930, '西单', -25, 23 ],
                        [ 1355, 930, '天安门西', 0, 25 ],
                        [ 1405, 930, '天安门东', 0, -15 ],
                        [ 1460, 930, '王府井', 0, 25 ],
                        [ 1525, 930, '东单', 25, 25 ],
                        [ 1595, 930, '', 0, 25 ],
                        [ 1690, 930, '永安里', 0, 25 ],
                        [ 1730, 930, '国贸', 25, -10 ],
                        [ 1790, 930, '大望路', -28, 25 ],
                        [ 1840, 930, '四惠', 0, -15 ],
                        [ 1890, 930, '四惠东', 0, -15 ] 
                    ];
    const line1Point = line1;
    const line2 = [  
                    [ 1375, 750 ],
                    [ 1445, 750 ],
                    [ 1505, 751 ],
                    [ 1555, 754 ],
                    [ 1585, 765 ],
                    [ 1595, 790 ],
                    [ 1596, 825 ],
                    [ 1596, 872 ],
                    [ 1596, 890 ],
                    [ 1595, 930 ],
                    [ 1585, 970 ],
                    [ 1555, 991 ],
                    [ 1505, 994 ],
                    [ 1435, 994 ],
                    [ 1360, 994 ],
                    [ 1290, 994 ],
                    [ 1259, 990 ],
                    [ 1230, 979 ],
                    [ 1218, 955 ],
                    [ 1215, 930 ],
                    [ 1215, 880 ],
                    [ 1215, 835 ],
                    [ 1216, 795 ],
                    [ 1226, 770 ],
                    [ 1255, 755 ],
                    [ 1295, 750 ],
                    [ 1375, 750 ]
                  ];

    const line2Point  = [ 
                            [ 1375, 750, '鼓楼大街', 38, 21 ],
                            [ 1445, 750, '安定门', 0, -14 ],
                            [ 1525, 751, '雍和宫', 34, -10 ],
                            [ 1595, 790, '东直门', 35, 5 ],
                            [ 1596, 825, '东四十条', 40, 5 ],
                            [ 1596, 872, '朝阳门', 32, 22 ],
                            [ 1595, 930, '建国门', 32, -10 ],
                            [ 1585, 970, '北京站', 35, 5 ],
                            [ 1525, 994, '崇文门', 30, 20 ],
                            [ 1435, 994, '前门', 0, 25 ],
                            [ 1360, 994, '和平门', 0, 25 ],
                            [ 1300, 994, '宣武门', -30, 25 ],
                            [ 1230, 979, '长椿街', -35, 5 ],
                            [ 1215, 930, '复兴门', -35, -15 ],
                            [ 1215, 880, '阜成门', -35, 5 ],
                            [ 1215, 835, '车公庄', -35, 25 ],
                            [ 1216, 795, '西直门', -35, 20 ],
                            [ 1295, 750, '积水潭', 0, -14 ]
                        ];

    const lineBatong = [[ 1840, 937.5, '', 0, -15 ],
                        [ 1890, 937.5, '', 0, -15 ],
                        [ 1950, 937.5, '高碑店', 0, -15 ],
                        [ 2000, 937.5, '传媒大学', 0, 25 ],
                        [ 2045, 937.5, '双桥', 0, -15 ],
                        [ 2085, 937.5, '管庄', 0, -15 ],
                        [ 2150, 937.5, '八里桥', 0, -15 ],
                        [ 2170, 990, '通州北苑', -45, 5 ],
                        [ 2190, 1042.5, '果园', -30, 5 ],
                        [ 2210, 1095, '九棵树', -35, 5 ],
                        [ 2230, 1147.5, '梨园', -35, 5 ],
                        [ 2250, 1200, '临河里', -35, 5 ],
                        [ 2270, 1252.5, '土桥', -30, 5 ]
                        ];     
    const lineBatongPoint = lineBatong.slice(2);  

    const line4 = [
                    [ 755, 475, '安河桥北', 0, 25 ],
                    [ 835, 475, '北宫门', 0, 25 ],
                    [ 915, 475, '西苑', 0, 25 ],
                    [ 987, 476, '', -35, 5 ],
                    [ 1005, 480, '', -35, 5 ],
                    [ 1010, 490, '圆明园', -35, 10 ],
                    [ 1010, 540, '北京大学东门', -60, 5 ],
                    [ 1010, 590, '中关村', -35, 5 ],
                    [ 1010, 640, '海淀黄庄', 40, -15 ],
                    [ 1010, 690, '人民大学', 40, 5 ],
                    [ 1010, 730, '魏公村', 35, 5 ],
                    [ 1010, 785, '', 35, 5 ],
                    [ 1015, 793, '', 35, 5 ],
                    [ 1020, 795, '', -60, 5 ],
                    [ 1100, 795, '动物园', 0, -15 ],
                    [ 1216, 795, '', -35, 5 ],
                    [ 1280, 795, '新街口', -20, 20 ],
                    [ 1294, 798, '', -35, 5 ],
                    [ 1299, 805, '', -35, 5 ],
                    [ 1300, 835, '', 325, 5 ],
                    [ 1300, 870, '西四', -25, 5 ],
                    [ 1300, 900, '灵境胡同', -40, 5 ],
                    [ 1300, 930, '', 0, 25 ],
                    [ 1300, 994, '', 0, 25 ],
                    [ 1300, 1050, '', 5, 25 ],
                    [ 1300, 1110, '陶然亭',35, 5 ],
                    [ 1300, 1168, '北京南站', 40, -15 ],
                    [ 1300, 1218, '马家堡', 30, -10 ],
                    [ 1300, 1266, '', -35, -15 ],
                    [ 1300, 1326, '公益西桥', -40, 3 ],
                    [ 1300, 1375, '新宫', -25, 3 ],
                    [ 1300, 1425, '西红门', -35, 3 ],
                    [ 1300, 1475, '高米店北', -45, 3 ],
                    [ 1300, 1525, '高米店南', -45, 3 ],
                    [ 1300, 1575, '枣园', -25, 3 ],
                    [ 1300, 1625, '清源路', -35, 3 ],
                    [ 1300, 1675, '黄村西大街', -50, 3 ],
                    [ 1300, 1725, '黄村火车站', -50, 3 ],
                    [ 1300, 1775, '义和庄', -35, 3 ],
                    [ 1300, 1825, '生物医药基地', -60, 3 ],
                    [ 1300, 1875, '天宫院', -35, 3 ],
                ];
    const line4Point = line4.slice();
    line4Point.splice(3,1);
    line4Point.splice(3,1);
    line4Point.splice(9,1);
    line4Point.splice(9,1);
    line4Point.splice(13,1);
    line4Point.splice(13,1);
  

    const line5 = [ 
                    [ 1525, 285, '天通苑北', 42, 5 ],
                    [ 1525, 310, '天通苑', 35, 5 ],
                    [ 1525, 355, '天通苑南', 42, 5 ],
                    [ 1525, 400, '立水桥', 35, -10 ],
                    [ 1525, 480, '立水桥南', 42, 5 ],
                    [ 1525, 520, '北苑路北', 42, 5 ],
                    [ 1525, 560, '大屯路东', 42, -10 ],
                    [ 1525, 600, '惠新西街北口', 56, 5 ],
                    [ 1525, 640, '惠新西街南口', 56, -15 ],
                    [ 1525, 685, '和平西桥', 42, 5 ],
                    [ 1525, 710, '和平里北街', 50, 5 ],
                    [ 1525, 751, '', 0, -14 ],
                    [ 1525, 785, '北新桥', 35, 5 ],
                    [ 1525, 830, '张自忠路', -40, 5 ],
                    [ 1525, 872, '东四', 26, -10 ],
                    [ 1525, 905, '灯市口', 35, 5 ],
                    [ 1525, 930, '', 35, 5 ],
                    [ 1525, 994, '', 35, 5 ],
                    [ 1525, 1050, '', 35, 5 ],
                    [ 1525, 1106, '天坛东门', 40, 5 ],
                    [ 1525, 1168, '蒲黄榆', 35, -10 ],
                    [ 1525, 1212, '刘家窑', 35, 5 ],
                    [ 1525, 1266, '宋家庄', 32, 20 ]
                  ];                 
    const line5Point = line5;
    const line6 = [ 
                    [ 520, 880, '金安桥', 0, -15 ],
                    [ 600, 880, '', 35, 0 ],
                    [ 600, 857, '杨庄', -25, 5 ],
                    [ 600, 835, '西黄村', 0, -15 ],
                    [ 660, 835, '廖公庄', 0, 25 ],
                    [ 735, 835, '田村', 0, 25 ],
                    [ 800, 835, '海淀五路居', 3, 25 ],
                    [ 873, 835, '', 0, 25 ],
                    [ 940, 835, '花园桥', -5, 25 ],
                    [ 1020, 835, '白石桥南', 40, -10 ],
                    [ 1125, 835, '车公庄西', -15, 25 ],
                    [ 1215, 835, '', -35, 5 ],
                    [ 1300, 835, '平安里', 30, 25 ],
                    [ 1340, 835, '北海北', 0, -15 ],
                    [ 1375, 835, '南锣鼓巷', 40, -15 ],
                    [ 1445, 872, '', 26, 5 ],
                    [ 1525, 872, '', 26, 5 ],
                    [ 1596, 872, '', 35, 5 ],
                    [ 1666, 872, '东大桥', 0, -15 ],
                    [ 1730, 872, '', 0, -15 ],
                    [ 1790, 872, '金台路', 30, -15 ],
                    [ 1870, 872, '十里堡', 0, -15 ],
                    [ 1930, 872, '青年路', 0, -15 ],
                    [ 1990, 872, '褡裢坡', 0, -15 ],
                    [ 2050, 872, '黄渠', 0, -15 ],
                    [ 2110, 872, '常营', 0, -15 ],
                    [ 2180, 872, '草房', 0, -15 ],
                    [ 2260, 872, '物资学院路', 0, -15 ],
                    [ 2340, 872, '通州北关', 0, -15 ],
                    [ 2420, 1010, '北运河西', -43, 4 ],
                    [ 2460, 1010, '北运河东', 0, -15 ],
                    [ 2510, 1010, '郝家村', 0, 25 ],
                    [ 2590, 1010, '东夏园', 0, 25 ],
                    [ 2670, 1010, '潞城', 0, 25 ]
                  ];
                    
    const line6Point = line6.slice();
    line6Point.splice(15, 1);

    const line7 = [
                    [ 1020, 980, '', 40, 5 ],
                    [ 1085, 1050, '湾子', 0, 25 ],
                    [ 1165, 1050, '达官营', 0, 25 ],
                    [ 1235, 1050, '广安门内', -3, 25 ],
                    [ 1300, 1050, '菜市口', 30, -10 ],
                    [ 1350, 1050, '虎坊桥', 0, 30 ],
                    [ 1410, 1050, '珠市口', 0, 25 ],
                    [ 1470, 1050, '桥湾', 0, 25 ],
                    [ 1525, 1050, '磁器口', 35, -10 ],
                    [ 1595, 1050, '广渠门内', 0, 25 ],
                    [ 1665, 1050, '广渠门外', 0, 25 ],
                    [ 1730, 1050, '', 0, 25 ],
                    [ 1795, 1050, '九龙山', -30, 25 ],
                    [ 1865, 1050, '大郊亭', 0, 25 ],
                    [ 1935, 1050, '百子湾', 35, 5 ],
                    [ 1935, 1120, '化工', 25, 5 ],
                    [ 1935, 1190, '南楼梓庄', 40, 5 ],
                    [ 1935, 1205, '', 45, 5 ],
                    [ 1985, 1255, '欢乐谷景区', 50, 0 ],
                    [ 2035, 1305, '垡头', 25, 0 ],
                    [ 2085, 1355, '双合', 25, 0 ],
                    [ 2135, 1405, '焦化厂', 35, 0 ],
                  ];
    const line7Point = line7.slice();
    line7Point.splice(17,1);

    const line8North = [ 
                            [ 1190, 320, '朱辛庄', -35, 5 ],
                            [ 1260, 320, '育知路', 0, 25 ],
                            [ 1325, 320, '平西府', 0, 25 ],
                            [ 1375, 320, '', 35, 5 ],
                            [ 1375, 350, '回龙观东大街', 60, 5 ],
                            [ 1375, 400, '霍营', 27, -15 ],
                            [ 1375, 440, '育新', 27, 5 ],
                            [ 1375, 465, '西小口', 35, 5 ],
                            [ 1375, 490, '永泰庄', 35, 5 ],
                            [ 1375, 520, '林萃桥', 35, 5 ],
                            [ 1375, 550, '森林公园南门', -60, -5 ],
                            [ 1375, 580, '奥林匹克公园', 60, 20 ],
                            [ 1375, 610, '奥体中心', 42, 13 ],
                            [ 1375, 640, '北土城', -33, -15 ],
                            [ 1375, 680, '安华桥', -33, 5 ],
                            [ 1375, 720, '安德里北街', -45, -10 ],
                            [ 1375, 750, '', 0, -14 ],
                            [ 1375, 790, '什刹海', -35, 0 ],
                            [ 1375, 835, '', 40, -15 ],
                            [ 1415, 885, '中国美术馆', 50, 7 ]
                        ];
    const line8NorthPoint = line8North.slice();
    line8NorthPoint.splice(3, 1);   
    
    const line9 = [ 
                    [ 1020, 795, '国家图书馆', -60, 5 ],
                    [ 1020, 835, '', -15, 25 ],
                    [ 1020, 887, '白堆子', 30, 5 ],
                    [ 1020, 930, '', 0, -15 ],
                    [ 1020, 980, '北京西站', 40, 0 ],
                    [ 990, 1030, '六里桥东', 40, 15 ],
                    [ 955, 1050, '六里桥', -5, -15 ],
                    [ 920, 1090, '七里庄', -30, -15 ],
                    [ 920, 1120, '丰台东大街', -50, 5 ],
                    [ 920, 1140, '丰台南路', -40, 5 ],
                    [ 920, 1170, '科怡路', -35, 5 ],
                    [ 920, 1210, '丰台科技园', -50, 5 ],
                    [ 920, 1250, '郭公庄', -35, 5 ],
                  ];

    const line10 = [
                    [ 1730, 1050, '',300,0 ],
                    [ 1730, 1116, '劲松', 28, 5 ],
                    [ 1730, 1166, '潘家园', 35, 5 ],
                    [ 1726, 1236, '十里河', 35, -15 ],
                    [ 1700, 1260, '', 0, -15 ],
                    [ 1660, 1266, '分钟寺', 0, -15 ],
                    [ 1590, 1266, '成寿寺', 0, -15 ],
                    [ 1525, 1266, '', 0, -15 ],
                    [ 1470, 1266, '石榴庄', 0, -15 ],
                    [ 1420, 1266, '大红门', 0, -15 ],
                    [ 1360, 1266, '角门东', 0, -15 ],
                    [ 1300, 1266, '角门西', -35, -15 ],
                    [ 1210, 1266, '草桥', 0, -15 ],
                    [ 1140, 1266, '纪家庙', 0, -15 ],
                    [ 1080, 1266, '首经贸', 0, -15 ], 
                    [ 1030, 1262, '丰台站', 0, -15 ],
                    [ 970, 1235, '', 30, 5 ],
                    [ 956, 1180, '泥洼', 30, 5 ],
                    [ 955, 1090, '西局', 30, 5 ],
                    [ 955, 1050, '六里桥', -5, -15 ],
                    [ 956, 990, '莲花桥', -35, 5 ],
                    [ 955, 930, '', 0, 25 ],
                    [ 911, 885, '西钓鱼台', -20, 25 ],   
                    [ 873, 835, '慈寿寺', -35, -10 ],
                    [ 870, 785, '长春桥', -35, 5 ],
                    [ 870, 740, '车道沟', -35, 5 ],
                    [ 872, 700, '火器营', -35, 5 ],
                    [ 881, 660, '', 0, 25 ],
                    [ 910, 643, '巴沟', 0, 25 ],
                    [ 960, 640, '苏州街', 0, 25 ],
                    [ 1010, 640, '海淀黄庄', 40, -15 ],
                    [ 1090, 640, '知春里', -5, 25 ],
                    [ 1190, 640, '知春路', -35, -15 ],
                    [ 1240, 640, '西土城', -5, 25 ],
                    [ 1290, 640, '牡丹园', -2, 25 ],
                    [ 1340, 640, '健德门', 0, 25 ],
                    [ 1375, 640, '北土城', -33, -15 ],
                    [ 1590, 640, '安贞门', 0, 25 ],
                    [ 1525, 640, '惠新西街南口', 56, -15 ],
                    [ 1640, 640, '芍药居', 35, -15 ],
                    [ 1705, 645, '', 33, 5 ],
                    [ 1728, 665, '三元桥', 33, 5 ],
                    [ 1730, 715, '亮马桥', 33, 5 ],
                    [ 1730, 790, '农业展览馆', 47, 5 ],
                    [ 1730, 835, '团结湖', -33, 0 ],
                    [ 1730, 872, '呼家楼', 33, 20 ],
                    [ 1730, 930, '', 30, 0 ],
                    [ 1730, 1050, '双井',25, -10 ],
                    ];
    const line10Point = line10.slice();
    line10Point.splice(4, 1);
    line10Point.splice(15, 1);
    line10Point.splice(25, 1);
    line10Point.splice(37, 1);

    const line13 = [
                        [ 1216, 795 ],
                        [ 1205, 790 ],   
                        [ 1195, 775 ],
                        [ 1190, 750 ],
                        [ 1190, 720 ],
                        [ 1190, 460 ],
                        [ 1225, 408 ],
                        [ 1310, 400 ],
                        [ 1375, 400 ],
                        [ 1525, 400 ],
                        [ 1600, 410 ],
                        [ 1630, 440 ],
                        [ 1639, 480 ],
                        [ 1640, 530 ],
                        [ 1640, 640 ],
                        [ 1640, 680 ],
                        [ 1640, 720 ],
                        [ 1640, 720 ],
                        [ 1625, 765 ],
                        [ 1595, 790 ],
                    ];
    const line13Point = [
                            [ 1216, 795, '', -35, 5 ],
                            [ 1190, 720, '大钟寺', -35, 5 ],
                            [ 1190, 640, '', -35, -15 ],
                            [ 1188, 580, '五道口', -35, 5 ],
                            [ 1188, 510, '上地', -30, 5 ],
                            [ 1190, 460, '西二旗', -35, 5 ],
                            [ 1225, 408, '龙泽', 0, -15 ],
                            [ 1310, 400, '回龙观', 0, -15 ],
                            [ 1375, 400, '霍营', 27, -15 ],
                            [ 1525, 400, '', 35, 5 ],
                            [ 1639, 480, '北苑', 25, 1 ],
                            [ 1640, 560, '望京西', 35, -15 ],
                            [ 1640, 640, '芍药居', 35, -15 ],
                            [ 1640, 680, '光熙门', 35, 0],
                            [ 1640, 720, '柳芳', 30, 0],
                            [ 1595, 790, '', 35, 5 ],
                        ];
    const line14West = [
                        [ 955, 1090, '西局', 30, 5 ],
                        [ 920, 1090, '', 0, -15 ],
                        [ 840, 1090, '大井', 0, -15 ], 
                        [ 780, 1090, '郭庄子', 5, -15 ],
                        [ 725, 1090, '大瓦窑', 5, -15 ],
                        [ 680, 1090, '园博园', -5, -15 ],
                        [ 620, 1090, '张郭庄', 0, -15 ],   
                    ];
    const line14WestPoint = line14West;

    const line14East = [
                        [ 1300, 1168, '北京南站', 40, -15 ],
                        [ 1420, 1168, '永定门外', 0, 25 ],
                        [ 1485, 1168, '景泰', 0, 25 ],
                        [ 1525, 1168, '', 35, 5 ],
                        [ 1620, 1168, '方庄', 0, 30 ],
                        [ 1726, 1236, '', 35, 5 ],
                        [ 1760, 1236, '北工大西门', 0, 25 ],
                        [ 1795, 1236, '', 0, 25 ],
                        [ 1795, 1140, '平乐园', 35, 5 ],
                        [ 1795, 1050, '', 0, 25 ],
                        [ 1790, 930, '', 0, 25 ],
                        [ 1790, 872, '', 0, -15 ],
                        [ 1790, 830, '朝阳公园', 40, 5 ],
                        [ 1790, 800, '枣营', 25, 10 ],
                        [ 1790, 750, '东风北桥', 40, 5 ],
                        [ 1790, 710, '将台', 25, 5 ],
                        [ 1790, 670, '', 40, 5 ],
                        [ 1770, 640, '望京南', 40, 5 ],
                        [ 1740, 600, '阜通', 25, 5 ],
                        [ 1730, 585, '', 40, 5 ],
                        [ 1730, 560, '望京', 28, -10 ],
                        [ 1730, 520, '东湖渠', 35, 5 ],
                        [ 1730, 470, '来广营', 35, 5 ],
                        [ 1730, 420, '善各庄', 35, 5 ],
                        ];
    const line14EastPoint = line14East.slice();
    line14EastPoint.splice(6,1);
    line14EastPoint.splice(14,1);
    line14EastPoint.splice(16,1);

    const line15 = [
                [ 1225, 580, '清华东路西口', 20, -15 ],
                [ 1270, 580, '六道口', 0, 22 ],
                [ 1325, 580, '北沙滩', 5, 22 ],
                [ 1375, 580, '', 60, 20 ], 
                [ 1450, 570, '安立路', 0, -15 ],
                [ 1525, 560, '', 42, 5 ],
                [ 1590, 560, '关庄', 5, 22 ],
                [ 1640, 560, '', 35, 10 ],
                [ 1730, 560, '', 28, 5 ],
                [ 1800, 560, '望京东', 0, 25 ],
                [ 1850, 560, '', 0, 25 ],
                [ 1850, 510, '崔各庄', -33, 5 ],
                [ 1850, 460, '马泉营', -33, 5 ],
                [ 1850, 410, '孙河', -25, 5 ],
                [ 1850, 360, '国展', -25, 5 ],
                [ 1850, 310, '花梨坎', -33, 5 ],
                [ 1850, 260, '后沙峪', -33, 5 ],
                [ 1850, 210, '南法信', -33, 5 ],
                [ 1910, 210, '石门', 0, 25 ],
                [ 1970, 210, '顺义', 0, 25 ],
                [ 2030, 210, '俸伯', 0, 25 ],
    ]
    const line15Point = line15.slice();
    line15Point.splice(10,1);

    const line16 = [
        [ 470, 285, '北安河', -15, -15 ],
        [ 520, 285, '温阳路', 0, -15 ],
        [ 570, 285, '稻香湖路', 15, -15 ],
        [ 620, 305, '屯佃', 20, -10 ],
        [ 670, 330, '永丰', 20, -10 ],
        [ 720, 355, '永丰南', 20, -10 ],
        [ 770, 380, '西北旺', 25, -15 ],
        [ 820, 405, '马连洼', 25, -15 ],
        [ 870, 430, '农大南路', 25, -15 ],
        [ 915, 475, '西苑', 0, 25 ],
    ]
    const line16Point = line16;

    const lineXijiao = [
        [ 380, 519, '香山', 0, 25 ],
        [ 500, 579, '植物园', -10, 25 ],
        [ 620, 639, '万安', 0, 25 ],
        [ 710, 639, '茶棚', 0, 25 ],
        [ 800, 639, '颐和园西门', 0, 25 ],
        [ 910, 639, '', 0, 25 ],
    ]
    const lineXijiaoPoint = lineXijiao.slice();
    lineXijiaoPoint.pop();

    const lineChangPing = [
                            [ 700, 50, '昌平西山口', 0, 25 ],
                            [ 800, 50, '', -45, 5 ],
                            [ 860, 80, '十三陵景区', 10, -25 ],
                            [ 920, 110, '', -45, 5 ],
                            [ 980, 110, '昌平', 0, 25 ],
                            [ 1060, 110, '昌平东关', 0, 25 ],
                            [ 1130, 110, '北邵洼', 0, -15 ],
                            [ 1190, 110, '', -45, 5 ],
                            [ 1190, 150, '南邵', -30, 5 ],
                            [ 1190, 190, '沙河高教园', -50, 5 ],
                            [ 1190, 230, '沙河', -30, 5 ],
                            [ 1190, 280, '巩华城', -35, 5 ],
                            [ 1190, 320, '', -35, 5 ],
                            [ 1190, 370, '生命科学园', -50, 5 ],
                            [ 1190, 460, '', -35, 5 ],
                          ];
    const lineChangPingPoint = lineChangPing.slice();
    lineChangPingPoint.splice(1,1);
    lineChangPingPoint.splice(2,1);
    lineChangPingPoint.splice(5,1);

    const curveGenerator = d3.svg.line().x(d => d[0]).y(d => d[1]);
    curveGenerator.interpolate('cardinal');
    curveGenerator.tension(0.7);

    const lineGenerator = d3.svg.line().x(d => d[0]).y(d => d[1]);

    const drawLine = function(data, color){
        vision.append('path')
        .attr('stroke', color)
        .attr("stroke-width", "8px")
        .attr('fill','none')
        .attr('d', lineGenerator(data));
    }

    const curve = function(data, color){
        vision.append('path')
        .attr('stroke', color)
        .attr("stroke-width", "8px")
        .attr('fill','none')
        .attr('d', curveGenerator(data));
    }

    const drawPoint = function(data, color){
        for(let i=0 ; i<data.length ; i++){
            vision.append('circle')    
            .attr("cx", data[i][0])
            .attr("cy", data[i][1])
            .attr("r", 6)
            .attr("stroke", color)
            .attr("stroke-width", "2px")
            .style('fill',"#fff");

            vision.append('text')
            .text(data[i][2])
            .attr("x", data[i][0])
            .attr('y', data[i][1])
            .attr('text-anchor', "middle")
            .attr('dx', data[i][3])
            .attr('dy', data[i][4])
        }
    }

    drawLine(line1, 'rgb(189,0,4,0.9)');
    drawPoint(line1Point, "rgb(189,0,4,0.9)");

    curve(line2, 'rgb(8,70,169,0.9)');
    drawPoint(line2Point, "rgb(8,70,169,0.9)");

    drawLine(lineBatong, 'rgb(189,0,4,0.9)');
    drawPoint(lineBatongPoint, 'rgb(189,0,4,0.9)');

    curve(line4, 'rgba(23,192,190,0.9)');
    drawPoint(line4Point, 'rgba(23,192,190,0.9)');

    drawLine(line5, 'rgba(133,0,84,0.9)');
    drawPoint(line5Point, 'rgba(133,0,84,0.9)');

    drawLine(line6, 'rgba(220,132,19,0.9)');
    drawPoint(line6Point, 'rgba(220,132,19,0.9)');

    drawLine(line7, 'rgba(222,74,15,0.9)');
    drawPoint(line7Point, 'rgba(222,74,15,0.9)');
    
    drawLine(line8North, 'rgba(10,83,38,0.9)');
    drawPoint(line8NorthPoint, 'rgba(10,83,38,0.9)');

    drawLine(line9, 'rgba(158,195,18,0.9)');
    drawPoint(line9, 'rgba(158,195,18,0.9)');

    curve(line10, 'rgba(15,132,254,0.9)');
    drawPoint(line10Point, 'rgba(15,132,254,0.9)');

    curve(line13, 'rgba(254,194,40,0.9)');
    drawPoint(line13Point, 'rgba(254,194,40,0.9)');

    drawLine(line14West, 'rgba(200,125,117,0.9)');
    drawPoint(line14WestPoint, 'rgba(200,125,117,0.9)');

    drawLine(line14East, 'rgba(200,125,117,0.9)');
    drawPoint(line14EastPoint, 'rgba(200,125,117,0.9)');

    drawLine(lineChangPing, 'rgba(180,0,111,0.9)');
    drawPoint(lineChangPingPoint, 'rgba(180,0,111,0.9)');

    drawLine(line15, 'rgba(60,23,72,0.9)');
    drawPoint(line15Point, 'rgba(60,23,72,0.9)');

    drawLine(line16, 'rgba(78,174,76,0.9)');
    drawPoint(line16Point, 'rgba(78,174,76,0.9)');

    drawLine(lineXijiao, 'rgba(191,34,41,0.9)');
    drawPoint(lineXijiaoPoint, 'rgba(191,34,41,0.9)');

    const vis= document.querySelector('#vision');
    let scale = 1, lastWidth = 2750, lastHeight = 1650,
    tranX = 0, tranY = 0, 
    winWidth = window.screen.availWidth , winHeight = window.screen.availHeight;
    vis.addEventListener('mousewheel', function(e){
        let lastScale = scale;
        if(e.wheelDelta>0){
            scale += 0.15;
            scale = Math.min(2.5,scale);
        }else if(e.wheelDelta<0){
            scale -= 0.15;
            scale = Math.max(scale,0.4);
        }
        // lastWidth *= scale;
        // lastHeight *= scale;
        // tranX += (0.5 - e.screenX/winWidth)*((scale - lastScale)*lastWidth)*0.2;
        // tranY += (0.5 - e.screenY/winHeight)*((scale - lastScale)*lastHeight)*0.2;
        // this.style.transform = `scale(${scale}) translate(${tranX}px, ${tranY}px)`;
        this.style.transform = `scale(${scale})`;
    })

    //原生拖拽
    // let winX, winY;
    // function movePage(e){
    //     let targetX =  window.scrollX - (e.clientX - winX)/50,
    //         targetY =  window.scrollY - (e.clientY - winY)/50;
    //     window.scroll(targetX, targetY);
    // }
    // const body = document.querySelector('body');
    // body.addEventListener('mousedown', function(e){
    //     winX = e.clientX, winY = e.clientY;
    //     body.addEventListener('mousemove', movePage);
    // })
    // body.addEventListener('mouseup', function(){
    //     body.removeEventListener('mousemove', movePage, false);
    // })
    
</script>

</body>

</html>